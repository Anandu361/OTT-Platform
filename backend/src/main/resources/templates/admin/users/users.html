<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Manage Users</title>
	<link
	      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	      rel="stylesheet">
</head>
<body>
<div th:replace="partial/navbar :: adminNavbar"></div>
<div class="container mt-4">
	<div class="mx-auto" style="max-width: 900px;">
		
		<h2 class="text-center pb-4">Manage Users</h2>

			<!-- ðŸ” Search -->
			<form method="get" th:action="@{/admin/users}" class="d-flex gap-2">
			    <input type="text"
			           name="keyword"
			           placeholder="Search by email"
			           th:value="${keyword}"
					   class="form-control d-inline-block w-75">
			    <button type="submit" class="btn btn-primary">Search</button>
			</form>

			<br>

			<table class="table table-striped">
			    <tr>
			        <th>ID</th>
					<th>Full Name</th>
			        <th>Email</th>
			        <th>Role</th>
			        <th>Status</th>
			        <th>Actions</th>
			    </tr>

			    <tr th:each="user : ${users}">
			        <td th:text="${user.id}"></td>
					<td th:text="${user.fullname}"></td>
			        <td th:text="${user.email}"></td>
			        <td th:text="${user.role}"></td>

			        <td>
			            <span th:if="${user.blocked}" class="badge rounded-pill text-bg-danger">Blocked</span>
			            <span th:if="${!user.blocked}" class="badge rounded-pill text-bg-success">Active</span>
			        </td>

			        <td>
			            <a th:if="${!user.blocked}"
			               th:href="@{/admin/users/block/{id}(id=${user.id})}"
						   class="btn btn-sm btn-danger">
			                Block
			            </a>

			            <a th:if="${user.blocked}"
			               th:href="@{/admin/users/unblock/{id}(id=${user.id})}"
						   class="btn btn-sm btn-success">
			                Unblock
			            </a>

			            
						<a th:href="@{/admin/users/history/{id}(id=${user.id})}" class="btn btn-sm btn-info text-white">
						    History
						</a>
						
						<a th:href="@{/admin/users/watchlist/{id}(id=${user.id})}" class="btn btn-sm btn-secondary text-white">
						    Watchlist
						</a>
			        </td>
			    </tr>
			</table>

			<br>
			<a href="/admin/dashboard" class="btn btn-primary">â¬… Back to Dashboard</a>
	</div>
</div>

</body>
</html>
