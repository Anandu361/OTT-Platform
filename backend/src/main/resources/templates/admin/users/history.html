<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>User Watch History</title>
	<link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet">
</head>
<body>
<div th:replace="partial/navbar :: adminNavbar"></div>
<div class="container mt-4">
<h2 class="text-center">User Watch History</h2>

<p class="mt-4">
    <strong>Name:</strong>
    <span th:text="${user.fullname}"></span>
</p>

<p>
    <strong>Email:</strong>
    <span th:text="${user.email}"></span>
</p>

<hr>

<table class="table table-striped mt-4">
    <tr>
        <th>#</th>
        <th>Movie</th>
        <th>Watched At</th>
    </tr>

	<tr th:each="h, stat : ${history}">
	    <td th:text="${stat.count}"></td>

	    <td th:text="${h.movie != null
	            ? h.movie.movieName
	            : 'Movie deleted'}">
	    </td>

	    <td th:text="${h.watchedAt != null
	            ? #temporals.format(h.watchedAt, 'dd MMM yyyy HH:mm')
	            : 'N/A'}">
	    </td>
	</tr>
</table>


<br>
<a href="/admin/users" class="btn btn-primary">â¬… Back to Users</a>
</div>

</body>
</html>
